@using System.Globalization
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@model ProductDetail
<!--================Single Product Area =================-->

<head>
    <style>
        .style-icon {
            height: 30px;
            width: 30px;
            min-height: 30px;
            min-width: 30px;
            border-radius: 20px;
            -moz-border-radius: 20px;
            -o-border-radius: 20px;
            -ms-border-radius: 20px;
            -webkit-border-radius: 20px;
            background: #f2f2f2
        }

        .mc-toggle {
            display: none;
            margin: 0;
            padding: 0;
            height: 0
        }

        .style-icon.white {
            background: 0 0;
            border: none
        }

        .style-text {
            font-size: 12px;
            font-weight: 700
        }

        select {
            background-color: #f6f6f6;
            border: 1px solid #e1e1e1;
            padding: 0 110px 0 20px;
            width: 100%;
            max-width: 100%;
            display: block
        }

        .select_daily {
            padding: 15px 0;
            height: 20PX;
            width: 100%
        }

        .showroom_city_id {
            height: 30px;
            width: 100%;
            background: #f6f6f6
        }

        .customers {
            border-collapse: collapse;
            width: 100%;
            box-sizing: border-box;
            padding: 0 !important
        }

            .customers strong {
                font-size: 14px;
                font-weight: 550;
            }

            .customers b {
                font-weight: 550;
                color: teal
            }

            .customers p {
                padding: 0;
                margin: 5px 0;
                font-size: 14px
            }

            .customers img {
                max-width: 40px;
                max-height: 40px
            }

            .customers td,
            .customers th {
                border: 1px solid #ebebeb;
                padding: 8px
            }

            .customers th {
                padding-top: 12px;
                padding-bottom: 12px;
                text-align: center;
                background-color: #fff;
                color: #383737;
                font-weight: 500
            }

        .button-delete {
            margin-bottom: 5px;
            padding: 5px 20px;
            text-transform: uppercase;
            background: #aaa;
            border: 1px solid #ccc;
            color: #fff;
            font-size: 13px;
            border: none;
            transition: .3s;
            width: 100%;
            text-align: center
        }

            .button-delete:hover {
                background: #777
            }

        .cart-button {
            text-align: right;
            padding: 21px
        }

        .button-address {
            margin-bottom: 5px;
            padding: 10px 20px;
            text-transform: uppercase;
            background: #ec2c1e;
            color: #fff;
            font-weight: 700;
            font-size: 14px;
            border: 1px solid #ec2c1e;
            transition: .3s;
            width: 100%;
            text-align: center;
            cursor: pointer
        }

            .button-address:hover {
                color: #ec2c1e;
                border-color: #ec2c1e;
                background: #fff
            }

        .cart-button .button-address {
            margin-bottom: 5px;
            padding: 10px 20px;
            text-transform: uppercase;
            background: #ec2c1e;
            color: #fff;
            font-weight: 700;
            font-size: 14px;
            border: 1px solid #ec2c1e;
            transition: .3s;
            width: 100%;
            text-align: center
        }

        .cart-button .button-cart {
            margin-bottom: 5px;
            text-transform: uppercase;
            padding: 10px 20px;
            background: #4189a9;
            color: #fff;
            border: 1px solid #4189a9;
            cursor: pointer;
            transition: .3s;
            font-size: 14px;
            font-weight: 700;
            width: 100%;
            text-align: center
        }

            .cart-button .button-cart:hover {
                background: #09628d
            }

        .cart-button .button-address:hover {
            color: #ec2c1e;
            border-color: #ec2c1e;
            background: #fff
        }

        .table-desktop {
            display: none;
            width: 100%
        }

        .table-mobile {
            display: block;
            width: 100%
        }

        .title-table {
            font-size: 14px
        }

            .title-table th {
                background-color: #ddd
            }

        .table-responsive table {
            width: 600px
        }

        }

        .table-address {
            width: 100%;
            border-collapse: collapse;
            box-sizing: border-box;
            padding: 0 !important
        }

            .table-address td,
            .table-address th {
                border: 1px solid #ebebeb;
                padding: 0 10px;
                text-align: left
            }

            .table-address a {
                display: block;
                padding: 5px 10px;
                text-align: center;
                font-size: 13px;
                margin: 3px 0
            }

                .table-address a.update {
                    background-color: #66afe9;
                    color: #fff
                }

                    .table-address a.update:hover {
                        background-color: #09628d
                    }

                .table-address a.delete {
                    background-color: #bbb;
                    color: #fff
                }

                    .table-address a.delete:hover {
                        background-color: #777
                    }

            .table-address .default {
                background: red;
                display: inline-block;
                color: #fff;
                padding: 2px 5px;
                font-size: 12px;
                border-radius: 5px;
                margin-top: 10px
            }

        .button-cancel-address {
            background: #ccc;
            padding: 9px 20px 11px;
            text-transform: uppercase;
            color: #fff;
            font-weight: 700;
            cursor: pointer;
            transition: .3s;
            font-size: 13px
        }

            .button-cancel-address:hover {
                background-color: #777
            }

        .cart-button .button-cart {
            width: 200px
        }

        }

        .table-desktop {
            display: block
        }

        .table-mobile {
            display: none
        }

        }

        .cart-add .image {
            margin: auto;
            width: 98px;
            min-width: 98px;
            height: 98px
        }

        .button-cancel {
            padding: 10px 20px;
            text-transform: uppercase;
            background: #000;
            color: #fffdfd;
            font-weight: 700;
            border: 1px solid #ec2c1e;
            cursor: pointer;
            transition: .3s;
            outline: 0;
            display: inline
        }

        .cs-input-group {
            position: relative
        }

            .cs-input-group .input:read-only {
                cursor: not-allowed;
                background: #ddd
            }

            .cs-input-group .input,
            .cs-input-group .select {
                width: 100%;
                box-sizing: border-box;
                outline: 0;
                border: 1px solid #ddd;
                padding: 10px;
                transition: .25s;
                border-radius: 5px;
                -ms-border-radius: 5px;
                -moz-border-radius: 5px;
                -o-border-radius: 5px;
                -webkit-border-radius: 5px;
                font-family: inherit;
                background: #fff
            }

                .cs-input-group .input:focus {
                    border-color: #66afe9
                }

            .cs-input-group .label {
                margin: 5px 0;
                font-weight: 600
            }

            .cs-input-group .checkbox {
                vertical-align: -4px;
                width: 18px;
                height: 18px;
                cursor: pointer
            }

        .cs-pay-group {
            border: 1px solid #000;
            border-radius: 5px;
            border: 1px solid #ddd;
            padding: 15px 20px 5px;
            margin-bottom: 10px
        }

            .cs-pay-group .container {
                display: block;
                position: relative;
                padding-left: 35px;
                margin-bottom: 12px;
                cursor: pointer;
                -webkit-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none
            }

                .cs-pay-group .container input {
                    position: absolute;
                    opacity: 0;
                    cursor: pointer
                }

            .cs-pay-group .checkmark {
                position: absolute;
                top: 1px;
                left: 5px;
                height: 18px;
                width: 18px;
                background-color: #eee;
                border-radius: 50%
            }

            .cs-pay-group .container:hover input ~ .checkmark {
                background-color: #ccc
            }

            .cs-pay-group .container input:checked ~ .checkmark {
                background-color: #337ab7
            }

            .cs-pay-group .checkmark:after {
                content: "";
                position: absolute;
                display: none
            }

            .cs-pay-group .container input:checked ~ .checkmark:after {
                display: block
            }

            .cs-pay-group .container .checkmark:after {
                top: 6px;
                left: 6px;
                width: 6px;
                height: 6px;
                border-radius: 50%;
                background: #fff
            }

        .address-diff {
            display: none
        }

        .box-bank {
            display: flex;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
            margin: 10px 0;
            display: none
        }

            .box-bank:last-child {
                border-bottom: none
            }

            .box-bank .image {
                min-width: 70px;
                width: 70px;
                line-height: 0;
                cursor: pointer;
                display: block;
                margin-top: 5px
            }

                .box-bank .image img {
                    width: 100%
                }

            .box-bank .about p {
                padding: 0 0 0 10px;
                margin: 0;
                font-size: 13px;
                color: #999
            }

                .box-bank .about p.title {
                    font-size: 15px;
                    color: #666
                }

        .box-cart {
            display: flex;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
            margin: 10px 0
        }

            .box-cart:last-child {
                border-bottom: none
            }

            .box-cart .image {
                min-width: 50px;
                width: 50px;
                line-height: 0;
                cursor: pointer;
                display: block;
                margin-top: 5px
            }

                .box-cart .image img {
                    width: 100%
                }

            .box-cart .about p {
                padding: 0 0 0 10px;
                margin: 0;
                font-size: 14px
            }

            .box-cart .price p {
                font-size: 14px
            }

        .radio-input {
            margin-left: 5px;
            margin-top: 20px;
            display: none
        }

        .image .detail-news-images {
            padding-left: 0;
            width: 100%;
            display: block
        }

            .image .detail-news-images img {
                max-width: 100%
            }

        .style-button {
            cursor: pointer;
            width: 30px;
            height: 30px;
            border: 1px solid red;
            background: #ec2c1e
        }

        .square-radio .radio-label {
            margin: 0 8px 8px 0;
            border: 1px#d4cbcb solid;
            display: block;
            line-height: 35px;
            text-align: center;
            color: #000;
            cursor: pointer;
            position: relative;
            padding: 0 8px;
            border-radius: 5px
        }

            .square-radio .radio-label.color {
                width: 35px;
                height: 35px;
                padding: 0
            }

        .square-radio .radio-input:checked + label:before {
            opacity: 1
        }

        .square-radio .radio-label:before {
            position: absolute;
            top: -1px;
            left: -1px;
            border: 1px solid #ec2c1e;
            border-radius: 5px;
            content: '';
            font-weight: 900;
            font-style: normal;
            opacity: 0;
            width: 100%;
            height: 100%
        }

        .square-radio .radio-label.color:before {
            height: 35px;
            width: 35px
        }

        .square-radio .radio-label.color:before {
            position: absolute;
            top: -1px;
            left: -1px;
            height: 35px;
            width: 35px;
            border: 1px solid #ec2c1e;
            content: '\f00c';
            font-family: Font Awesome\ 5 Free;
            font-weight: 900;
            font-style: normal;
            opacity: 0
        }

        .radio-label-weight {
            margin: 5px 5px 5px 0;
            margin-bottom: 10px;
            cursor: pointer;
            padding: 3px 6px;
            position: relative
        }

            .radio-label-weight img {
                width: 100%
            }

        .radio-label-img {
            margin: 5px 3px 5px 0;
            margin-bottom: 10px;
            height: 50px;
            width: 50px;
            border: 1px solid #ddd;
            cursor: pointer;
            position: relative
        }

            .radio-label-img img {
                width: 100%
            }

        .radio-input:checked + label:before {
            opacity: 1
        }

        .radio-label-img:before {
            position: absolute;
            top: -1px;
            left: -1px;
            height: 50px;
            width: 50px;
            border: 1px solid #ec2c1e;
            content: '';
            opacity: 0
        }

        .product-radio .check-box .radio-label {
            padding: 3px 20px !important
        }

        .product-radio .check-box .radio-input:checked + label:before {
            content: '\f00c';
            font-family: Font Awesome\ 5 Free;
            font-weight: 900;
            font-style: normal;
            position: absolute;
            top: 6px;
            left: 0;
            font-size: 15px;
            border-color: #ec2c1e;
            color: #ec2c1e
        }

        .product-radio .check-box .radio-label:before {
            position: absolute;
            content: '';
            top: 5px;
            left: 0;
            border: 1px solid #ddd;
            width: 14px;
            height: 14px
        }

        .khuyen-mai {
            width: 100%;
            padding: 15px 0;
            border-radius: 1px
        }

            .khuyen-mai p {
                padding: 0 5px;
                margin: 0
            }

                .khuyen-mai p i {
                    color: #ec2c1e
                }

            .khuyen-mai ul li {
                padding: 5px
            }

            .khuyen-mai label {
                padding: 0 20px
            }

        .table-checkout {
            width: 100%
        }

            .table-checkout td {
                padding: 10px 5px;
                border-bottom: 1px solid #eee
            }

            .table-checkout .image {
                width: 50px;
                position: relative
            }

                .table-checkout .image img {
                    max-width: 50px
                }

                .table-checkout .image .qty {
                    position: absolute;
                    background-color: #337ab7;
                    padding: 1px 6px;
                    border-radius: 50%;
                    color: #fff;
                    top: 0;
                    right: 0;
                    font-size: 11px
                }

            .table-checkout p {
                padding: 0;
                margin: 0
            }

                .table-checkout p.title {
                    color: #666
                }

                .table-checkout p.properties {
                    font-size: 12px
                }

        .check-out .discount {
            width: 100%;
            padding: 20px 2px
        }

            .check-out .discount input {
                width: calc(100% - 135px);
                padding: 10px;
                margin-right: 10px;
                border-radius: 5px;
                border: 1px solid #ddd
            }

            .check-out .discount button {
                width: 100px;
                background-color: #357ebd;
                border: 1px solid #357ebd;
                color: #fff;
                border-radius: 5px;
                cursor: pointer
            }

                .check-out .discount button:hover {
                    background-color: #09628d
                }

        .check-out p.total {
            width: 100%;
            text-align: right;
            font-size: 17px;
            padding: 20px 5px;
            margin: 0;
            border-top: 1px solid #eee
        }

        .check-out .action {
            width: 100%
        }

            .check-out .action a {
                width: calc(100% - 175px);
                padding: 15px 0;
                margin-right: 10px
            }

            .check-out .action button {
                width: 160px;
                background-color: #357ebd;
                border: 1px solid #357ebd;
                color: #fff;
                border-radius: 5px;
                cursor: pointer;
                font-size: 18px
            }

                .check-out .action button:hover {
                    background-color: #09628d
                }

        .check-out .price-info {
            width: 100%;
            border-top: 1px solid #eee
        }

            .check-out .price-info p {
                margin: 0;
                padding: 5px
            }

        .check-out .price-info-success {
            width: 100%
        }

            .check-out .price-info-success p {
                margin: 0;
                padding: 5px
            }

        .address-success p {
            padding: 0 0 5px;
            margin: 0
        }

        .action-success {
            margin: 20px 0
        }

            .action-success a {
                background-color: #357ebd;
                border: 1px solid #357ebd;
                color: #fff;
                border-radius: 5px;
                cursor: pointer;
                font-size: 16px;
                padding: 10px 20px
            }

                .action-success a:hover {
                    background-color: #09628d
                }

        .filter-price {
            margin-top: 5px
        }

            .filter-price label {
                font-size: 14px;
                text-transform: none;
                font-weight: 400;
                margin-right: 5px
            }

            .filter-price select {
                display: inline-block;
                width: auto;
                max-width: auto;
                background-color: #fff;
                border: 1px solid #ddd;
                padding: 5px 10px;
                outline: 0
            }

        .properties-detail table th {
            width: 200px
        }

        }

        .properties-detail {
            width: 100%
        }

            .properties-detail table {
                border-collapse: collapse;
                width: 100%
            }

                .properties-detail table td,
                .properties-detail table th {
                    border: 1px solid #e1e1e1;
                    padding: 10px
                }

                    .properties-detail table td li {
                        list-style: disc inside
                    }

                .properties-detail table th {
                    text-align: left
                }

        .action-cart-product.panel-btn {
            position: relative;
            z-index: 99999;
            width: auto;
            height: auto;
            background-color: none;
            padding: 0;
            box-shadow: none
        }

        .action-cart-product .disable {
            background-color: #ccc;
            border: 1px solid #bbb;
            color: #888
        }

            .action-cart-product .disable:hover {
                background-color: #ccc;
                border: 1px solid #bbb;
                color: #888
            }

        .pop-button-action .pop-disable {
            background-color: #ccc;
            border: 1px solid #bbb;
            color: #888
        }

            .pop-button-action .pop-disable:hover {
                background-color: #ccc;
                border: 1px solid #bbb;
                color: #888
            }
    </style>
</head>
<div class="product_image_area">
    <div class="container">
        <div class="row s_product_inner">
            <div class="col-lg-6">
                <div class="s_product_img">
                    <div id="carouselExampleIndicators"
                         class="carousel slide"
                         data-ride="carousel">
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img class="d-block w-100"
                                     src="~/IMGproject/@Model.Img"
                                     alt="First slide" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-5 offset-lg-1">
                <div class="s_product_text">
                    <h3>@Model.Name</h3>
                    <h2>@(string.Format(CultureInfo.GetCultureInfo("vi-VN"),"{0:C}",@Model.SellPrice))</h2>
                    <ul class="list">
                        <li>
                            <a> <span>Tình trạng</span> : @(ViewBag.countProduct > 0 ? "    Còn hàng" :"Hết hàng")</a>

                        </li>
                        <li>
                            <a> <span>Thương hiệu</span> : @Model.Product.Brand.Name</a>
                        </li>
                    </ul>
                    <div class="cs-flex" style="border-top: 1px #CCC dashed; margin-top: 20px; margin-bottom: 10px; padding-top: 15px;">
                        @foreach (var pro in ViewBag.listProduct)
                        {
                            <div style="float: left; -webkit-box-shadow: 0 0 5px #888; border-radius: 5px; margin: 0 10px 5px 0; padding: 3px 8px; text-align: center;">
                                <a href="/Product/ProductDetail?pid=@ViewBag.pid&dtid=@pro.DetailId">
                                    <p style="padding: 0; margin: 0;">
                                        @if (pro.DetailId == Model.DetailId)
                                        {
                                            <i class="far fa-check-circle"></i>
                                        }
                                        else
                                        {
                                            <i class="far fa-circle"></i>
                                        }
                                        @pro.Name
                                    </p>
                                    <p style="padding: 0; margin: 0; color: red; font-size: 13px; display: inline-block;">@(string.Format(CultureInfo.GetCultureInfo("vi-VN"),"{0:C}",@pro.SellPrice))</p>
                                </a>
                            </div>
                        }
                        <div style="clear: both;"></div>
                    </div>
                    <p style="color:green;font-size:larger;padding-bottom:0px">
                        Chọn hương vị bên dưới
                    </p>
                    <div class="square-radio cs-flex">
                        @foreach (var savor in @ViewBag.listSavor)
                        {
                            <input class="radio-input" value="@savor.Savor.SavorId" type="radio" name="p_2" id="@savor.Savor.SavorId" namepro="Hương vị: @savor.Savor.Description">
                            <label id="select_type_@savor.Savor.SavorId" class="radio-label inventory" for="@savor.Savor.SavorId">@savor.Savor.Description</label>
                        }
                    </div>
                    <p id="quantity"></p>
                    <div class="product_count">
                        <label for="qty">Quantity:</label>
                        <input type="text"
                               name="qty"
                               id="sst"
                               maxlength="12"
                               value="0"
                               title="Quantity:"
                               class="input-text qty" onchange="console.log(this.value)" />
                        <button onclick="var result = document.getElementById('sst'); var sst = result.value; if( !isNaN( sst )) result.value++;return false;"
                                class="increase items-count changequantity"
                                type="button" id="add">
                            <i class="lnr lnr-chevron-up"></i>
                        </button>
                        <button onclick="var result = document.getElementById('sst'); var sst = result.value; if( !isNaN( sst ) &amp;&amp; sst > 0 ) result.value--;return false;"
                                class="reduced items-count changequantity"
                                type="button">
                            <i class="lnr lnr-chevron-down"></i>
                        </button>
                    </div>
                    <div class="card_area">
                        <a class="main_btn" id="add-cart">Add to Cart</a>
                        <a class="icon_btn" href="/Ngu/Ngu">
                            <i class="lnr lnr lnr-heart"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--================End Single Product Area =================-->
<!--================Product Description Area =================-->
<section class="product_description_area">
    <div class="container">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
                <a class="nav-link"
                   id="home-tab"
                   data-toggle="tab"
                   href="#home"
                   role="tab"
                   aria-controls="home"
                   aria-selected="true">Description</a>
            </li>
            <li class="nav-item">
                <a class="nav-link"
                   id="profile-tab"
                   data-toggle="tab"
                   href="#profile"
                   role="tab"
                   aria-controls="profile"
                   aria-selected="false">Specification</a>
            </li>
        </ul>
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade"
                 id="home"
                 role="tabpanel"
                 aria-labelledby="home-tab">
                @Html.Raw(@ViewBag.product)
            </div>
            <div class="tab-pane fade"
                 id="profile"
                 role="tabpanel"
                 aria-labelledby="profile-tab">
                <div class="table-responsive">
                    <table class="table">
                        <tbody>
                            <tr>
                                <td>
                                    <h5>Serving Size</h5>
                                </td>
                                <td>
                                    <h5>@Model.ServingSize</h5>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <h5>Serving Per Container</h5>
                                </td>
                                <td>
                                    <h5>@Model.Serving</h5>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <h5>Trọng lượng</h5>
                                </td>
                                <td>
                                    <h5>@Model.Size.Description</h5>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <h5>Hương vị</h5>
                                </td>
                                <td>
                                    <ul>
                                        @foreach (var vi in ViewBag.listSavor)
                                        {
                                            <li>
                                                @vi.Savor.Description
                                            </li>
                                        }
                                    </ul>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <h5>Xuất xứ</h5>
                                </td>
                                <td>
                                    <h5>@Model.Product.Country.Name</h5>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</section>
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
<!--================End Product Description Area =================-->
<script>
    $(document).ready(function(){
        var link = "";
        $("input[name='p_2']").click(function(){
            var sid = $('input[name="p_2"]:checked').val();
            var dtid = @Model.DetailId;
            $.get(`/Product/getQuantity?sid=${sid}&did=${dtid}`, (response) => {
                $('#quantity').text("In stock : " + response + " sản phẩm");
            })
            $('#sst').val(0);
           $('#add-cart').attr('href', `/Cart/AddCart?did=${dtid}&sid=${sid}`);
           link = $('#add-cart').attr('href');
            $("#add").removeAttr('disabled');
        });



        $(document).ready(function(){
            $('.changequantity').click(async function(){

                var quantity = $('#sst').val();
                var sid = $('input[name="p_2"]:checked').val();
                var dtid = @Model.DetailId;
                $('#add-cart').attr('href', `${link}&quantity=${quantity}`);
                const a = await fetch(`/Product/getQuantity?sid=${sid}&did=${dtid}`)
                  .then(response => response.json())
                  .then(data => {return data});
                if(quantity==a){
                    $("#add").attr('disabled','disabled')
                    alert("Đã chọn tới giới hạn")
                }else{
                    $("#add").removeAttr('disabled');
                }
            });
        });



    });


</script>